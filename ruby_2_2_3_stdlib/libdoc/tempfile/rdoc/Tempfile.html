<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <!-- classpage -- >
    <!-- RD version: 0.33.0  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  <meta name='description' content='  Class : Tempfile  -   Ruby 2_2_3 ' />
  <meta content="2015-10-03 10:48:42 -0500" http-equiv="change-date" />
  <!-- rel_prefix  = ''  ENV['RDOC_FOR_WEBSITE']   = true-->
    
    
    
  <!-- rel_prefix = '.'   asset_rel_prefix = ''  --> 
  <title>Class: Tempfile (Ruby 2_2_3) </title>
  <!-- link rel="stylesheet" href=".css/obf.css"  -->
  <link rel="stylesheet" href="css/inuit.css" >
  <link rel="stylesheet" href="css/grid.inuit.css" >
  <link rel="stylesheet" href="css/2011.css" type="text/css" >
  <link rel="stylesheet" href="css/rdoc.css" type="text/css" >

  <script src="/js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="/js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="/js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="/js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 

 
<script src="/js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 

  <style type='text/css'>

    #vulns-alert #vulns{
      background-color: #c33 ! important;
      width: 100%;
      text-align: center;
   }
   
   #vulns-alert #vulns a {
    color: #F99 ! important;
   }
 </style>

</head>

<body id="top" class="class rdocstar">
<div id='actionbar' >
<div class='wrapper'>
  <ul class='grids g0'>
	<li class='grid-2' ><a href='/' target='_top' >Home</a></li>
	<li class='grid-2' ><a href='/core' target='_top' >Core </a></li>
	<li class='grid-2' ><a href='/stdlib' target='_top' >Std-lib </a></li>

	 <!-- li class='grid-2' ><a href='/zems' target='_top' >Zems</a></li -->
   <li class='grid-2' ><a href='/downloads' target='_top' >Downloads</a></li>
	 <li class='grid-5 right' id='rd-action-search'><form id="searchbox_011815814100681837392:wnccv6st5qk" action="http://ruby-doc.com/search.html"><input type="hidden" name="cx" value="011815814100681837392:wnccv6st5qk" ><input  id='rd-search-input' name="q" type="text" size="20" >&#160;&#160;<input type="submit" name="sa" value="Search" ><input type="hidden" name="cof" value="FORID:9" ></form></li>
	</ul>
</div>
<span id='vulns-alert'></span>
<!-- VERSION HEADER for 2_2_3 NOT FOUND --></div> <!-- end action bar -->
 <div class='wrapper'>
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
          
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul id='file-metadata'>

          
          
          
          <li class='in-file'>tempfile.rb</li>      
            
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">DelegateClass(File)</p>
        
      </div>
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="Tempfile/Remover.html">Tempfile::Remover</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-create">::create</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-c-open">::open</a></li>
          
          <li><a href="#method-i-close">#close</a></li>
          
          <li><a href="#method-i-close-21">#close!</a></li>
          
          <li><a href="#method-i-delete">#delete</a></li>
          
          <li><a href="#method-i-length">#length</a></li>
          
          <li><a href="#method-i-open">#open</a></li>
          
          <li><a href="#method-i-path">#path</a></li>
          
          <li><a href="#method-i-size">#size</a></li>
          
          <li><a href="#method-i-unlink">#unlink</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
          
          
          
          <li><a href="./Tempfile.html">Tempfile</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div> <!-- metadata -->
  <div class='adzbox'  id="azk83167">
    
   <div id="carbonads-container"><div class="carbonad"><div id="azcarbon"></div><script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/19647/azcarbon_2_1_0_VERT"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script></div></div>
<script type="text/javascript">
  function checkCarbs() {
    var searchFor = ".car" + "bona" + "d-tag";
    var ctext = $(searchFor);
    if (!ctext.length ) {
     // alert("Cannot find element with class " + searchFor );
      $("#azcarbon").append("<div class='rd-ab-msg'>If you are running an ad blocker please consider white-listing ruby-doc.org. <br><br>Thank you.</div>");
    }
  }
//  window.setTimeout(checkCarbs,3000); 
</script>

   
  </div> 
  <div id="documentation">
    <h1 class="class">Tempfile</h1>

    <div id="description" class="description">
      
<p>A utility class for managing temporary files. When you create a <a
href="Tempfile.html">Tempfile</a> object, it will create a temporary file
with a unique filename. A <a href="Tempfile.html">Tempfile</a> objects
behaves just like a File object, and you can perform all the usual file
operations on it: reading data, writing data, changing its permissions,
etc. So although this class does not explicitly document all instance
methods supported by File, you can in fact call any File instance method on
a <a href="Tempfile.html">Tempfile</a> object.</p>

<h2 id="class-Tempfile-label-Synopsis">Synopsis<span><a href="#class-Tempfile-label-Synopsis">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'tempfile'</span>

<span class="ruby-identifier">file</span> = <span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'foo'</span>)
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">path</span>      <span class="ruby-comment"># =&gt; A unique filename in the OS's temp directory,</span>
               <span class="ruby-comment">#    e.g.: &quot;/tmp/foo.24722.0&quot;</span>
               <span class="ruby-comment">#    This filename contains 'foo' in its basename.</span>
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">write</span>(<span class="ruby-string">&quot;hello world&quot;</span>)
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">rewind</span>
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">read</span>      <span class="ruby-comment"># =&gt; &quot;hello world&quot;</span>
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">close</span>
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">unlink</span>    <span class="ruby-comment"># deletes the temp file</span>
</pre>

<h2 id="class-Tempfile-label-Good+practices">Good practices<span><a href="#class-Tempfile-label-Good+practices">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="class-Tempfile-label-Explicit+close">Explicit close<span><a href="#class-Tempfile-label-Explicit+close">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>When a <a href="Tempfile.html">Tempfile</a> object is garbage collected, or
when the Ruby interpreter exits, its associated temporary file is
automatically deleted. This means that’s it’s unnecessary to explicitly
delete a <a href="Tempfile.html">Tempfile</a> after use, though it’s good
practice to do so: not explicitly deleting unused Tempfiles can potentially
leave behind large amounts of tempfiles on the filesystem until they’re
garbage collected. The existence of these temp files can make it harder to
determine a new <a href="Tempfile.html">Tempfile</a> filename.</p>

<p>Therefore, one should always call <a
href="Tempfile.html#method-i-unlink">unlink</a> or close in an ensure
block, like this:</p>

<pre>file = Tempfile.new('foo')
begin
   ...do something with file...
ensure
   file.close
   file.unlink   # deletes the temp file
end</pre>

<h3 id="class-Tempfile-label-Unlink+after+creation">Unlink after creation<span><a href="#class-Tempfile-label-Unlink+after+creation">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>On POSIX systems, it’s possible to unlink a file right after creating it,
and before closing it. This removes the filesystem entry without closing
the file handle, so it ensures that only the processes that already had the
file handle open can access the file’s contents. It’s strongly recommended
that you do this if you do not want any other processes to be able to read
from or write to the <a href="Tempfile.html">Tempfile</a>, and you do not
need to know the Tempfile’s filename either.</p>

<p>For example, a practical use case for unlink-after-creation would be this:
you need a large byte buffer that’s too large to comfortably fit in RAM,
e.g. when you’re writing a web server and you want to buffer the client’s
file upload data.</p>

<p>Please refer to <a href="Tempfile.html#method-i-unlink">unlink</a> for more
information and a code example.</p>

<h2 id="class-Tempfile-label-Minor+notes">Minor notes<span><a href="#class-Tempfile-label-Minor+notes">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Tempfile’s filename picking method is both thread-safe and
inter-process-safe: it guarantees that no other threads or processes will
pick the same filename.</p>

<p><a href="Tempfile.html">Tempfile</a> itself however may not be entirely
thread-safe. If you access the same <a href="Tempfile.html">Tempfile</a>
object from multiple threads then you should protect it with a mutex.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="create-method" class="method-detail ">
          <a name="method-c-create"></a>

          
          <div class="method-heading">
            <span class="method-name">create</span><span
              class="method-args">(basename, tmpdir=nil, mode: 0, **options)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Creates a temporally file as usual File object (not <a
href="Tempfile.html">Tempfile</a>). It don’t use finalizer and delegation.</p>

<p>If no block is given, this is similar to <a
href="Tempfile.html#method-c-new">::new</a> except creating File instead of
<a href="Tempfile.html">Tempfile</a>. The created file is not removed
automatically. You should use File.unlink to remove it.</p>

<p>If a block is given, then a File object will be constructed, and the block
is invoked with the object as the argument. The File object will be
automatically closed and the temporally file is removed after the block
terminates. The call returns the value of the block.</p>

<p>In any case, all arguments (+*args+) will be treated as <a
href="Tempfile.html#method-c-new">::new</a>.</p>

<pre>Tempfile.create('foo', '/home/temp') do |f|
   ... do something with f ...
end</pre>
            

            
            <div class="method-source-code" id="create-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File tempfile.rb, line 350</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">basename</span>, <span class="ruby-identifier">tmpdir</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">mode</span><span class="ruby-operator">:</span> <span class="ruby-value">0</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">tmpfile</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">Dir</span><span class="ruby-operator">::</span><span class="ruby-constant">Tmpname</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">basename</span>, <span class="ruby-identifier">tmpdir</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tmpname</span>, <span class="ruby-identifier">n</span>, <span class="ruby-identifier">opts</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">mode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">RDWR</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">CREAT</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">EXCL</span>
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:perm</span>] = <span class="ruby-value">0600</span>
    <span class="ruby-identifier">tmpfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">tmpname</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">opts</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">tmpfile</span>
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-identifier">tmpfile</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tmpfile</span>.<span class="ruby-identifier">closed?</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">tmpfile</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">tmpfile</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- create-source -->
            
          </div>

          

          
        </div><!-- create-method -->
      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">new(basename, [tmpdir = Dir.tmpdir], [options])</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Creates a temporary file with permissions 0600 (= only readable and
writable by the owner) and opens it with mode “w+”.</p>

<p>The <code>basename</code> parameter is used to determine the name of the
temporary file. You can either pass a String or an Array with 2 String
elements. In the former form, the temporary file’s base name will begin
with the given string. In the latter form, the temporary file’s base name
will begin with the array’s first element, and end with the second element.
For example:</p>

<pre class="ruby"><span class="ruby-identifier">file</span> = <span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'hello'</span>)
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">path</span>  <span class="ruby-comment"># =&gt; something like: &quot;/tmp/hello2843-8392-92849382--0&quot;</span>

<span class="ruby-comment"># Use the Array form to enforce an extension in the filename:</span>
<span class="ruby-identifier">file</span> = <span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">new</span>([<span class="ruby-string">'hello'</span>, <span class="ruby-string">'.jpg'</span>])
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">path</span>  <span class="ruby-comment"># =&gt; something like: &quot;/tmp/hello2843-8392-92849382--0.jpg&quot;</span>
</pre>

<p>The temporary file will be placed in the directory as specified by the
<code>tmpdir</code> parameter. By default, this is <code>Dir.tmpdir</code>.
When $SAFE &gt; 0 and the given <code>tmpdir</code> is tainted, it uses
‘/tmp’ as the temporary directory. Please note that ENV values are tainted
by default, and <code>Dir.tmpdir</code>‘s return value might come from
environment variables (e.g. <code>$TMPDIR</code>).</p>

<pre class="ruby"><span class="ruby-identifier">file</span> = <span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'hello'</span>, <span class="ruby-string">'/home/aisaka'</span>)
<span class="ruby-identifier">file</span>.<span class="ruby-identifier">path</span>  <span class="ruby-comment"># =&gt; something like: &quot;/home/aisaka/hello2843-8392-92849382--0&quot;</span>
</pre>

<p>You can also pass an options hash. Under the hood, <a
href="Tempfile.html">Tempfile</a> creates the temporary file using
<code>File.open</code>. These options will be passed to
<code>File.open</code>. This is mostly useful for specifying encoding
options, e.g.:</p>

<pre class="ruby"><span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'hello'</span>, <span class="ruby-string">'/home/aisaka'</span>, :<span class="ruby-identifier">encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'ascii-8bit'</span>)

<span class="ruby-comment"># You can also omit the 'tmpdir' parameter:</span>
<span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'hello'</span>, :<span class="ruby-identifier">encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'ascii-8bit'</span>)
</pre>

<h3 id="method-c-new-label-Exceptions">Exceptions<span><a href="#method-c-new-label-Exceptions">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>If <a href="Tempfile.html#method-c-new">::new</a> cannot find a unique
filename within a limited number of tries, then it will raise an exception.</p>
            

            
            <div class="method-source-code" id="new-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File tempfile.rb, line 125</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">basename</span>, <span class="ruby-identifier">tmpdir</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">mode</span><span class="ruby-operator">:</span> <span class="ruby-value">0</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;Tempfile.new doesn't call the given block.&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@data</span> = []
  <span class="ruby-ivar">@clean_proc</span> = <span class="ruby-constant">Remover</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@data</span>)
  <span class="ruby-constant">ObjectSpace</span>.<span class="ruby-identifier">define_finalizer</span>(<span class="ruby-keyword">self</span>, <span class="ruby-ivar">@clean_proc</span>)

  <span class="ruby-operator">::</span><span class="ruby-constant">Dir</span><span class="ruby-operator">::</span><span class="ruby-constant">Tmpname</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">basename</span>, <span class="ruby-identifier">tmpdir</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tmpname</span>, <span class="ruby-identifier">n</span>, <span class="ruby-identifier">opts</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">mode</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">RDWR</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">CREAT</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">EXCL</span>
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:perm</span>] = <span class="ruby-value">0600</span>
    <span class="ruby-ivar">@data</span>[<span class="ruby-value">1</span>] = <span class="ruby-ivar">@tmpfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">tmpname</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">opts</span>)
    <span class="ruby-ivar">@data</span>[<span class="ruby-value">0</span>] = <span class="ruby-ivar">@tmpname</span> = <span class="ruby-identifier">tmpname</span>
    <span class="ruby-ivar">@mode</span> = <span class="ruby-identifier">mode</span> <span class="ruby-operator">&amp;</span> <span class="ruby-operator">~</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">CREAT</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">EXCL</span>)
    <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">freeze</span>
    <span class="ruby-ivar">@opts</span> = <span class="ruby-identifier">opts</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">super</span>(<span class="ruby-ivar">@tmpfile</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->
      
        <div id="open-method" class="method-detail ">
          <a name="method-c-open"></a>

          
          <div class="method-heading">
            <span class="method-name">open</span><span
              class="method-args">(*args)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Creates a new <a href="Tempfile.html">Tempfile</a>.</p>

<p>If no block is given, this is a synonym for <a
href="Tempfile.html#method-c-new">::new</a>.</p>

<p>If a block is given, then a <a href="Tempfile.html">Tempfile</a> object
will be constructed, and the block is run with said object as argument. The
<a href="Tempfile.html">Tempfile</a> object will be automatically closed
after the block terminates. The call returns the value of the block.</p>

<p>In any case, all arguments (+*args+) will be passed to <a
href="Tempfile.html#method-c-new">::new</a>.</p>

<pre>Tempfile.open('foo', '/home/temp') do |f|
   ... do something with f ...
end

# Equivalent:
f = Tempfile.open('foo', '/home/temp')
begin
   ... do something with f ...
ensure
   f.close
end</pre>
            

            
            <div class="method-source-code" id="open-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File tempfile.rb, line 314</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">open</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">tempfile</span> = <span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">tempfile</span>)
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-identifier">tempfile</span>.<span class="ruby-identifier">close</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">tempfile</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- open-source -->
            
          </div>

          

          
        </div><!-- open-method -->
      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="close-method" class="method-detail ">
          <a name="method-i-close"></a>

          
          <div class="method-heading">
            <span class="method-name">close</span><span
              class="method-args">(unlink_now=false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Closes the file. If <code>unlink_now</code> is true, then the file will be
unlinked (deleted) after closing. Of course, you can choose to later call
<a href="Tempfile.html#method-i-unlink">unlink</a> if you do not unlink it
now.</p>

<p>If you don’t explicitly unlink the temporary file, the removal will be
delayed until the object is finalized.</p>
            

            
            <div class="method-source-code" id="close-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File tempfile.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">close</span>(<span class="ruby-identifier">unlink_now</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">unlink_now</span>
    <span class="ruby-identifier">close!</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">_close</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- close-source -->
            
          </div>

          

          
        </div><!-- close-method -->
      
        <div id="close-21-method" class="method-detail ">
          <a name="method-i-close-21"></a>

          
          <div class="method-heading">
            <span class="method-name">close!</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Closes and unlinks (deletes) the file. Has the same effect as called
<code>close(true)</code>.</p>
            

            
            <div class="method-source-code" id="close-21-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File tempfile.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">close!</span>
  <span class="ruby-identifier">_close</span>
  <span class="ruby-identifier">unlink</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- close-21-source -->
            
          </div>

          

          
        </div><!-- close-21-method -->
      
        <div id="delete-method" class="method-detail method-alias">
          <a name="method-i-delete"></a>

          
          <div class="method-heading">
            <span class="method-name">delete</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="Tempfile.html#method-i-unlink">unlink</a>
          </div>
          
        </div><!-- delete-method -->
      
        <div id="length-method" class="method-detail method-alias">
          <a name="method-i-length"></a>

          
          <div class="method-heading">
            <span class="method-name">length</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="Tempfile.html#method-i-size">size</a>
          </div>
          
        </div><!-- length-method -->
      
        <div id="open-method" class="method-detail ">
          <a name="method-i-open"></a>

          
          <div class="method-heading">
            <span class="method-name">open</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Opens or reopens the file with mode “r+”.</p>
            

            
            <div class="method-source-code" id="open-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File tempfile.rb, line 147</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">open</span>
  <span class="ruby-ivar">@tmpfile</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@tmpfile</span>
  <span class="ruby-ivar">@tmpfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-ivar">@tmpname</span>, <span class="ruby-ivar">@mode</span>, <span class="ruby-ivar">@opts</span>)
  <span class="ruby-ivar">@data</span>[<span class="ruby-value">1</span>] = <span class="ruby-ivar">@tmpfile</span>
  <span class="ruby-identifier">__setobj__</span>(<span class="ruby-ivar">@tmpfile</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- open-source -->
            
          </div>

          

          
        </div><!-- open-method -->
      
        <div id="path-method" class="method-detail ">
          <a name="method-i-path"></a>

          
          <div class="method-heading">
            <span class="method-name">path</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Returns the full path name of the temporary file. This will be nil if <a
href="Tempfile.html#method-i-unlink">unlink</a> has been called.</p>
            

            
            <div class="method-source-code" id="path-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File tempfile.rb, line 236</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">path</span>
  <span class="ruby-ivar">@tmpname</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- path-source -->
            
          </div>

          

          
        </div><!-- path-method -->
      
        <div id="size-method" class="method-detail ">
          <a name="method-i-size"></a>

          
          <div class="method-heading">
            <span class="method-name">size</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Returns the size of the temporary file.  As a side effect, the IO buffer is
flushed before determining the size.</p>
            

            
            <div class="method-source-code" id="size-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File tempfile.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">size</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@tmpfile</span>
    <span class="ruby-ivar">@tmpfile</span>.<span class="ruby-identifier">flush</span>
    <span class="ruby-ivar">@tmpfile</span>.<span class="ruby-identifier">stat</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@tmpname</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-ivar">@tmpname</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- size-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="Tempfile.html#method-i-length">length</a>
          </div>
          

          
        </div><!-- size-method -->
      
        <div id="unlink-method" class="method-detail ">
          <a name="method-i-unlink"></a>

          
          <div class="method-heading">
            <span class="method-name">unlink</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Unlinks (deletes) the file from the filesystem. One should always unlink
the file after using it, as is explained in the “Explicit close” good
practice section in the <a href="Tempfile.html">Tempfile</a> overview:</p>

<pre>file = Tempfile.new('foo')
begin
   ...do something with file...
ensure
   file.close
   file.unlink   # deletes the temp file
end</pre>

<h3 id="method-i-unlink-label-Unlink-before-close">Unlink-before-close<span><a href="#method-i-unlink-label-Unlink-before-close">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>On POSIX systems it’s possible to unlink a file before closing it. This
practice is explained in detail in the <a href="Tempfile.html">Tempfile</a>
overview (section “Unlink after creation”); please refer there for more
information.</p>

<p>However, unlink-before-close may not be supported on non-POSIX operating
systems. Microsoft Windows is the most notable case: unlinking a non-closed
file will result in an error, which this method will silently ignore. If
you want to practice unlink-before-close whenever possible, then you should
write code like this:</p>

<pre>file = Tempfile.new('foo')
file.unlink   # On Windows this silently fails.
begin
   ... do something with file ...
ensure
   file.close!   # Closes the file handle. If the file wasn't unlinked
                 # because #unlink failed, then this method will attempt
                 # to do so again.
end</pre>
            

            
            <div class="method-source-code" id="unlink-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File tempfile.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unlink</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@tmpname</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span>(<span class="ruby-ivar">@tmpname</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EACCES</span>
    <span class="ruby-comment"># may not be able to unlink on Windows; just ignore</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># remove tmpname from remover</span>
  <span class="ruby-ivar">@data</span>[<span class="ruby-value">0</span>] = <span class="ruby-ivar">@data</span>[<span class="ruby-value">1</span>] = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@tmpname</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">ObjectSpace</span>.<span class="ruby-identifier">undefine_finalizer</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- unlink-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="Tempfile.html#method-i-delete">delete</a>
          </div>
          

          
        </div><!-- unlink-method -->
      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  
  <div id='tx_Tempfile_versioned' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_Tempfile_versioned").load("/associated/2_2_3/Tempfile.html");</script> <div id='tx_Tempfile' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_Tempfile").load("/associated/Tempfile.html");</script> 
      
  <!-- disqus ? -->
   <div class='info'>
  <p>Commenting is here to help enhance the documentation.  For example, code samples, or clarification of the documentation.</p>
  <p>If you have questions about Ruby or the documentation, please post to one of the <a href='http://www.ruby-lang.org/en/community/mailing-lists/'>Ruby mailing lists</a>.  You will get better, faster, help that way.</p>
  <p>If you wish to post a correction of the docs, please do so, but also <a href='http://bugs.ruby-lang.org' >file bug report</a> so that it can be corrected for the next release. Thank you.</p>
  <p>If you want to help improve the Ruby documentation, please visit <a href='http://documenting-ruby.org/'>Documenting-ruby.org</a>.</p> 
    </div>


  
  </div><!-- documentation -->
  <div id='dynamic'>
  </div>
      
        <div id="disqus_thread"></div>
  <script type="text/javascript">
     function setDisqusUrl(){
      var _loc = window.location.href;
      disqus_url = _loc.split("?")[0];
    }

     var disqus_url;
     
    
     setDisqusUrl();
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    // var disqus_shortname = 'rubydocbeta'; // required 
    var disqus_shortname = 'ruby-doc'; // required 


    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

      
<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 2_2_3</small></p> 
  
   <p><a href="http://ruby-doc.org">Ruby-doc.org</a> is a service of <a href="http://jamesbritt.com">James Britt</a> and <a href="http://neurogami.com">Neurogami</a>, a <a href="http://neurogami.com">software development company in Scottsdale, AZ</a>.</p>
 
    <p><small>Generated with Ruby-doc Rdoc Generator 0.33.0</small>.</p>
  </div>
</div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-335317-2', 'auto');
  ga('send', 'pageview');

</script>


    
 <script type='text/javascript'>
$(document).ready(function() {
      $.ajaxSetup({ cache: false });
      $("#vulns-alert").load("/associated/vulns.html");
    });

    </script>


 
		<script type='text/javascript'>

	function loadPlus(plusdocs){
//		var img_h = $("img.carbonad-image").css('height');
		//if(img_h != undefined) { //---
			$(plusdocs).find("div[class='associated_wrapper']").each (function() {
					$("#" + this.id).append($(plusdocs).find("#" + this.id ));
					});
		//} // ---
	} // end loadPlusdocs

   function loadInline(json){
    for (var lookFor in json) {
      $(lookFor).after(json[lookFor]);
     }
  } // end loadPlusdocs


$(document).ready(function() {
		$.ajaxSetup({ cache: false });
			$.get('/associated/2_2_3/plus_Tempfile.html', 
			function(plusdocs) {
			setTimeout(function() {
				loadPlus(plusdocs);
				}, 2000);
			}
			);


    $.ajax({
    dataType: "json",
     url: '/associated/2_2_3/inline_Tempfile.js',
     success: function(json) {
			setTimeout(function() {
				loadInline(json);
				}, 2000);
			}
   });

		});
</script>
		
</body>
</html>



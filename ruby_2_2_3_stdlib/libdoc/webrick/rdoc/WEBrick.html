<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <!-- classpage -- >
    <!-- RD version: 0.33.0  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  <meta name='description' content='  Module : WEBrick  -   Ruby 2_2_3 ' />
  <meta content="2015-10-03 10:50:13 -0500" http-equiv="change-date" />
  <!-- rel_prefix  = ''  ENV['RDOC_FOR_WEBSITE']   = true-->
    
    
    
  <!-- rel_prefix = '.'   asset_rel_prefix = ''  --> 
  <title>Module: WEBrick (Ruby 2_2_3) </title>
  <!-- link rel="stylesheet" href=".css/obf.css"  -->
  <link rel="stylesheet" href="css/inuit.css" >
  <link rel="stylesheet" href="css/grid.inuit.css" >
  <link rel="stylesheet" href="css/2011.css" type="text/css" >
  <link rel="stylesheet" href="css/rdoc.css" type="text/css" >

  <script src="/js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="/js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="/js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="/js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 

 
<script src="/js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 

  <style type='text/css'>

    #vulns-alert #vulns{
      background-color: #c33 ! important;
      width: 100%;
      text-align: center;
   }
   
   #vulns-alert #vulns a {
    color: #F99 ! important;
   }
 </style>

</head>

<body id="top" class="module rdocstar">
<div id='actionbar' >
<div class='wrapper'>
  <ul class='grids g0'>
	<li class='grid-2' ><a href='/' target='_top' >Home</a></li>
	<li class='grid-2' ><a href='/core' target='_top' >Core </a></li>
	<li class='grid-2' ><a href='/stdlib' target='_top' >Std-lib </a></li>

	 <!-- li class='grid-2' ><a href='/zems' target='_top' >Zems</a></li -->
   <li class='grid-2' ><a href='/downloads' target='_top' >Downloads</a></li>
	 <li class='grid-5 right' id='rd-action-search'><form id="searchbox_011815814100681837392:wnccv6st5qk" action="http://ruby-doc.com/search.html"><input type="hidden" name="cx" value="011815814100681837392:wnccv6st5qk" ><input  id='rd-search-input' name="q" type="text" size="20" >&#160;&#160;<input type="submit" name="sa" value="Search" ><input type="hidden" name="cof" value="FORID:9" ></form></li>
	</ul>
</div>
<span id='vulns-alert'></span>
<!-- VERSION HEADER for 2_2_3 NOT FOUND --></div> <!-- end action bar -->
 <div class='wrapper'>
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
          
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul id='file-metadata'>

          
          
          
          <li class='in-file'>webrick.rb</li>      
            
          
          <li class='in-file'>webrick/accesslog.rb</li>      
            
          
          <li class='in-file'>webrick/cgi.rb</li>      
            
          
          <li class='in-file'>webrick/config.rb</li>      
            
          
          <li class='in-file'>webrick/cookie.rb</li>      
            
          
          <li class='in-file'>webrick/htmlutils.rb</li>      
            
          
          <li class='in-file'>webrick/httpauth.rb</li>      
            
          
          <li class='in-file'>webrick/httpauth/authenticator.rb</li>      
            
          
          <li class='in-file'>webrick/httpauth/basicauth.rb</li>      
            
          
          <li class='in-file'>webrick/httpauth/digestauth.rb</li>      
            
          
          <li class='in-file'>webrick/httpauth/htdigest.rb</li>      
            
          
          <li class='in-file'>webrick/httpauth/htgroup.rb</li>      
            
          
          <li class='in-file'>webrick/httpauth/htpasswd.rb</li>      
            
          
          <li class='in-file'>webrick/httpauth/userdb.rb</li>      
            
          
          <li class='in-file'>webrick/httpproxy.rb</li>      
            
          
          <li class='in-file'>webrick/httprequest.rb</li>      
            
          
          <li class='in-file'>webrick/httpresponse.rb</li>      
            
          
          <li class='in-file'>webrick/https.rb</li>      
            
          
          <li class='in-file'>webrick/httpserver.rb</li>      
            
          
          <li class='in-file'>webrick/httpservlet.rb</li>      
            
          
          <li class='in-file'>webrick/httpservlet/abstract.rb</li>      
            
          
          <li class='in-file'>webrick/httpservlet/cgihandler.rb</li>      
            
          
          <li class='in-file'>webrick/httpservlet/erbhandler.rb</li>      
            
          
          <li class='in-file'>webrick/httpservlet/filehandler.rb</li>      
            
          
          <li class='in-file'>webrick/httpservlet/prochandler.rb</li>      
            
          
          <li class='in-file'>webrick/httpstatus.rb</li>      
            
          
          <li class='in-file'>webrick/httputils.rb</li>      
            
          
          <li class='in-file'>webrick/httpversion.rb</li>      
            
          
          <li class='in-file'>webrick/log.rb</li>      
            
          
          <li class='in-file'>webrick/server.rb</li>      
            
          
          <li class='in-file'>webrick/ssl.rb</li>      
            
          
          <li class='in-file'>webrick/utils.rb</li>      
            
          
          <li class='in-file'>webrick/version.rb</li>      
            
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">MODULE</span> <a href="WEBrick/AccessLog.html">WEBrick::AccessLog</a></li>
          
          <li><span class="type">MODULE</span> <a href="WEBrick/Config.html">WEBrick::Config</a></li>
          
          <li><span class="type">MODULE</span> <a href="WEBrick/HTMLUtils.html">WEBrick::HTMLUtils</a></li>
          
          <li><span class="type">MODULE</span> <a href="WEBrick/HTTPAuth.html">WEBrick::HTTPAuth</a></li>
          
          <li><span class="type">MODULE</span> <a href="WEBrick/HTTPServlet.html">WEBrick::HTTPServlet</a></li>
          
          <li><span class="type">MODULE</span> <a href="WEBrick/HTTPStatus.html">WEBrick::HTTPStatus</a></li>
          
          <li><span class="type">MODULE</span> <a href="WEBrick/HTTPUtils.html">WEBrick::HTTPUtils</a></li>
          
          <li><span class="type">MODULE</span> <a href="WEBrick/Utils.html">WEBrick::Utils</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/BasicLog.html">WEBrick::BasicLog</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/CGI.html">WEBrick::CGI</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/Cookie.html">WEBrick::Cookie</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/Daemon.html">WEBrick::Daemon</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/GenericServer.html">WEBrick::GenericServer</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/HTTPProxyServer.html">WEBrick::HTTPProxyServer</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/HTTPRequest.html">WEBrick::HTTPRequest</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/HTTPResponse.html">WEBrick::HTTPResponse</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/HTTPServer.html">WEBrick::HTTPServer</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/HTTPServerError.html">WEBrick::HTTPServerError</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/HTTPVersion.html">WEBrick::HTTPVersion</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/Log.html">WEBrick::Log</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/ServerError.html">WEBrick::ServerError</a></li>
          
          <li><span class="type">CLASS</span> <a href="WEBrick/SimpleServer.html">WEBrick::SimpleServer</a></li>
          
        </ul>
      </div>
      

      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
          
          
          
          <li><a href="./Dir.html">Dir</a></li>
        
          
          
          <li><a href="./Errno.html">Errno</a></li>
        
          
          
          <li><a href="./Errno/ECONNABORTED.html">Errno::ECONNABORTED</a></li>
        
          
          
          <li><a href="./Errno/ECONNRESET.html">Errno::ECONNRESET</a></li>
        
          
          
          <li><a href="./Errno/EPROTO.html">Errno::EPROTO</a></li>
        
          
          
          <li><a href="./File.html">File</a></li>
        
          
          
          <li><a href="./Object.html">Object</a></li>
        
          
          
          <li><a href="./WEBrick.html">WEBrick</a></li>
        
          
          
          <li><a href="./WEBrick/AccessLog.html">WEBrick::AccessLog</a></li>
        
          
          
          <li><a href="./WEBrick/AccessLog/AccessLogError.html">WEBrick::AccessLog::AccessLogError</a></li>
        
          
          
          <li><a href="./WEBrick/BasicLog.html">WEBrick::BasicLog</a></li>
        
          
          
          <li><a href="./WEBrick/CGI.html">WEBrick::CGI</a></li>
        
          
          
          <li><a href="./WEBrick/Config.html">WEBrick::Config</a></li>
        
          
          
          <li><a href="./WEBrick/Config/OpenSSL.html">WEBrick::Config::OpenSSL</a></li>
        
          
          
          <li><a href="./WEBrick/Cookie.html">WEBrick::Cookie</a></li>
        
          
          
          <li><a href="./WEBrick/Daemon.html">WEBrick::Daemon</a></li>
        
          
          
          <li><a href="./WEBrick/GenericServer.html">WEBrick::GenericServer</a></li>
        
          
          
          <li><a href="./WEBrick/HTMLUtils.html">WEBrick::HTMLUtils</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth.html">WEBrick::HTTPAuth</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/Authenticator.html">WEBrick::HTTPAuth::Authenticator</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/BasicAuth.html">WEBrick::HTTPAuth::BasicAuth</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/DigestAuth.html">WEBrick::HTTPAuth::DigestAuth</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/Htdigest.html">WEBrick::HTTPAuth::Htdigest</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/Htgroup.html">WEBrick::HTTPAuth::Htgroup</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/Htpasswd.html">WEBrick::HTTPAuth::Htpasswd</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/ProxyAuthenticator.html">WEBrick::HTTPAuth::ProxyAuthenticator</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/ProxyBasicAuth.html">WEBrick::HTTPAuth::ProxyBasicAuth</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/ProxyDigestAuth.html">WEBrick::HTTPAuth::ProxyDigestAuth</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPAuth/UserDB.html">WEBrick::HTTPAuth::UserDB</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPProxyServer.html">WEBrick::HTTPProxyServer</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPRequest.html">WEBrick::HTTPRequest</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPResponse.html">WEBrick::HTTPResponse</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServer.html">WEBrick::HTTPServer</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServerError.html">WEBrick::HTTPServerError</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServlet.html">WEBrick::HTTPServlet</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServlet/AbstractServlet.html">WEBrick::HTTPServlet::AbstractServlet</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServlet/CGIHandler.html">WEBrick::HTTPServlet::CGIHandler</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServlet/DefaultFileHandler.html">WEBrick::HTTPServlet::DefaultFileHandler</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServlet/ERBHandler.html">WEBrick::HTTPServlet::ERBHandler</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServlet/FileHandler.html">WEBrick::HTTPServlet::FileHandler</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServlet/HTTPServletError.html">WEBrick::HTTPServlet::HTTPServletError</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPServlet/ProcHandler.html">WEBrick::HTTPServlet::ProcHandler</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPStatus.html">WEBrick::HTTPStatus</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPStatus/ClientError.html">WEBrick::HTTPStatus::ClientError</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPStatus/EOFError.html">WEBrick::HTTPStatus::EOFError</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPStatus/Error.html">WEBrick::HTTPStatus::Error</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPStatus/Info.html">WEBrick::HTTPStatus::Info</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPStatus/Redirect.html">WEBrick::HTTPStatus::Redirect</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPStatus/ServerError.html">WEBrick::HTTPStatus::ServerError</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPStatus/Status.html">WEBrick::HTTPStatus::Status</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPStatus/Success.html">WEBrick::HTTPStatus::Success</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPUtils.html">WEBrick::HTTPUtils</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPUtils/FormData.html">WEBrick::HTTPUtils::FormData</a></li>
        
          
          
          <li><a href="./WEBrick/HTTPVersion.html">WEBrick::HTTPVersion</a></li>
        
          
          
          <li><a href="./WEBrick/Log.html">WEBrick::Log</a></li>
        
          
          
          <li><a href="./WEBrick/ServerError.html">WEBrick::ServerError</a></li>
        
          
          
          <li><a href="./WEBrick/SimpleServer.html">WEBrick::SimpleServer</a></li>
        
          
          
          <li><a href="./WEBrick/Utils.html">WEBrick::Utils</a></li>
        
          
          
          <li><a href="./WEBrick/Utils/TimeoutHandler.html">WEBrick::Utils::TimeoutHandler</a></li>
        
          
          
          <li><a href="./WEBrick/Utils/TimeoutHandler/Thread.html">WEBrick::Utils::TimeoutHandler::Thread</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div> <!-- metadata -->
  <div class='adzbox'  id="azk83167">
    
   <div id="carbonads-container"><div class="carbonad"><div id="azcarbon"></div><script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/19647/azcarbon_2_1_0_VERT"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script></div></div>
<script type="text/javascript">
  function checkCarbs() {
    var searchFor = ".car" + "bona" + "d-tag";
    var ctext = $(searchFor);
    if (!ctext.length ) {
     // alert("Cannot find element with class " + searchFor );
      $("#azcarbon").append("<div class='rd-ab-msg'>If you are running an ad blocker please consider white-listing ruby-doc.org. <br><br>Thank you.</div>");
    }
  }
//  window.setTimeout(checkCarbs,3000); 
</script>

   
  </div> 
  <div id="documentation">
    <h1 class="module">WEBrick</h1>

    <div id="description" class="description">
      
<h1 id="module-WEBrick-label-WEB+server+toolkit.">WEB server toolkit.<span><a href="#module-WEBrick-label-WEB+server+toolkit.">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><a href="WEBrick.html">WEBrick</a> is an HTTP server toolkit that can be
configured as an HTTPS server, a proxy server, and a virtual-host server. 
<a href="WEBrick.html">WEBrick</a> features complete logging of both server
operations and HTTP access.  <a href="WEBrick.html">WEBrick</a> supports
both basic and digest authentication in addition to algorithms not in RFC
2617.</p>

<p>A <a href="WEBrick.html">WEBrick</a> server can be composed of multiple <a
href="WEBrick.html">WEBrick</a> servers or servlets to provide differing
behavior on a per-host or per-path basis.  <a
href="WEBrick.html">WEBrick</a> includes servlets for handling <a
href="WEBrick/CGI.html">CGI</a> scripts, ERb pages, Ruby blocks and
directory listings.</p>

<p><a href="WEBrick.html">WEBrick</a> also includes tools for daemonizing a
process and starting a process at a higher privilege level and dropping
permissions.</p>

<h2 id="module-WEBrick-label-Starting+an+HTTP+server">Starting an HTTP server<span><a href="#module-WEBrick-label-Starting+an+HTTP+server">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>To create a new <a href="WEBrick/HTTPServer.html">WEBrick::HTTPServer</a>
that will listen to connections on port 8000 and serve documents from the
current user’s public_html folder:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'webrick'</span>

<span class="ruby-identifier">root</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span> <span class="ruby-string">'~/public_html'</span>
<span class="ruby-identifier">server</span> = <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPServer</span>.<span class="ruby-identifier">new</span> :<span class="ruby-constant">Port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">8000</span>, :<span class="ruby-constant">DocumentRoot</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">root</span>
</pre>

<p>To run the server you will need to provide a suitable shutdown hook as
starting the server blocks the current thread:</p>

<pre class="ruby"><span class="ruby-identifier">trap</span> <span class="ruby-string">'INT'</span> <span class="ruby-keyword">do</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">shutdown</span> <span class="ruby-keyword">end</span>

<span class="ruby-identifier">server</span>.<span class="ruby-identifier">start</span>
</pre>

<h2 id="module-WEBrick-label-Custom+Behavior">Custom Behavior<span><a href="#module-WEBrick-label-Custom+Behavior">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>The easiest way to have a server perform custom operations is through <a
href="WEBrick/HTTPServer.html#method-i-mount_proc">WEBrick::HTTPServer#mount_proc</a>.
The block given will be called with a <a
href="WEBrick/HTTPRequest.html">WEBrick::HTTPRequest</a> with request info
and a <a href="WEBrick/HTTPResponse.html">WEBrick::HTTPResponse</a> which
must be filled in appropriately:</p>

<pre class="ruby"><span class="ruby-identifier">server</span>.<span class="ruby-identifier">mount_proc</span> <span class="ruby-string">'/'</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-string">'Hello, world!'</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Remember that <code>server.mount_proc</code> must precede
<code>server.start</code>.</p>

<h2 id="module-WEBrick-label-Servlets">Servlets<span><a href="#module-WEBrick-label-Servlets">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Advanced custom behavior can be obtained through mounting a subclass of <a
href="WEBrick/HTTPServlet/AbstractServlet.html">WEBrick::HTTPServlet::AbstractServlet</a>.
Servlets provide more modularity when writing an HTTP server than
mount_proc allows.  Here is a simple servlet:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Simple</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPServlet</span><span class="ruby-operator">::</span><span class="ruby-constant">AbstractServlet</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">do_GET</span> <span class="ruby-identifier">request</span>, <span class="ruby-identifier">response</span>
    <span class="ruby-identifier">status</span>, <span class="ruby-identifier">content_type</span>, <span class="ruby-identifier">body</span> = <span class="ruby-identifier">do_stuff_with</span> <span class="ruby-identifier">request</span>

    <span class="ruby-identifier">response</span>.<span class="ruby-identifier">status</span> = <span class="ruby-value">200</span>
    <span class="ruby-identifier">response</span>[<span class="ruby-string">'Content-Type'</span>] = <span class="ruby-string">'text/plain'</span>
    <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span> = <span class="ruby-string">'Hello, World!'</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>To initialize the servlet you mount it on the server:</p>

<pre class="ruby"><span class="ruby-identifier">server</span>.<span class="ruby-identifier">mount</span> <span class="ruby-string">'/simple'</span>, <span class="ruby-constant">Simple</span>
</pre>

<p>See <a
href="WEBrick/HTTPServlet/AbstractServlet.html">WEBrick::HTTPServlet::AbstractServlet</a>
for more details.</p>

<h2 id="module-WEBrick-label-Virtual+Hosts">Virtual Hosts<span><a href="#module-WEBrick-label-Virtual+Hosts">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>A server can act as a virtual host for multiple host names.  After creating
the listening host, additional hosts that do not listen can be created and
attached as virtual hosts:</p>

<pre>server = WEBrick::HTTPServer.new # ...

vhost = WEBrick::HTTPServer.new :ServerName =&gt; 'vhost.example',
                                :DoNotListen =&gt; true, # ...
vhost.mount '/', ...

server.virtual_host vhost</pre>

<p>If no <code>:DocumentRoot</code> is provided and no servlets or procs are
mounted on the main server it will return 404 for all URLs.</p>

<h2 id="module-WEBrick-label-HTTPS">HTTPS<span><a href="#module-WEBrick-label-HTTPS">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>To create an HTTPS server you only need to enable SSL and provide an SSL
certificate name:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'webrick'</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">'webrick/https'</span>

<span class="ruby-identifier">cert_name</span> = [
  <span class="ruby-node">%w[CN localhost]</span>,
]

<span class="ruby-identifier">server</span> = <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPServer</span>.<span class="ruby-identifier">new</span>(:<span class="ruby-constant">Port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">8000</span>,
                                 :<span class="ruby-constant">SSLEnable</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,
                                 :<span class="ruby-constant">SSLCertName</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cert_name</span>)
</pre>

<p>This will start the server with a self-generated self-signed certificate.
The certificate will be changed every time the server is restarted.</p>

<p>To create a server with a pre-determined key and certificate you can
provide them:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'webrick'</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">'webrick/https'</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">'openssl'</span>

<span class="ruby-identifier">cert</span> = <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">X509</span><span class="ruby-operator">::</span><span class="ruby-constant">Certificate</span>.<span class="ruby-identifier">new</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span> <span class="ruby-string">'/path/to/cert.pem'</span>
<span class="ruby-identifier">pkey</span> = <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">PKey</span><span class="ruby-operator">::</span><span class="ruby-constant">RSA</span>.<span class="ruby-identifier">new</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span> <span class="ruby-string">'/path/to/pkey.pem'</span>

<span class="ruby-identifier">server</span> = <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPServer</span>.<span class="ruby-identifier">new</span>(:<span class="ruby-constant">Port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">8000</span>,
                                 :<span class="ruby-constant">SSLEnable</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,
                                 :<span class="ruby-constant">SSLCertificate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cert</span>,
                                 :<span class="ruby-constant">SSLPrivateKey</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">pkey</span>)
</pre>

<h2 id="module-WEBrick-label-Proxy+Server">Proxy Server<span><a href="#module-WEBrick-label-Proxy+Server">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="WEBrick.html">WEBrick</a> can act as a proxy server:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'webrick'</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">'webrick/httpproxy'</span>

<span class="ruby-identifier">proxy</span> = <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPProxyServer</span>.<span class="ruby-identifier">new</span> :<span class="ruby-constant">Port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">8000</span>

<span class="ruby-identifier">trap</span> <span class="ruby-string">'INT'</span> <span class="ruby-keyword">do</span> <span class="ruby-identifier">proxy</span>.<span class="ruby-identifier">shutdown</span> <span class="ruby-keyword">end</span>
</pre>

<p>See WEBrick::HTTPProxy for further details including modifying proxied
responses.</p>

<h2 id="module-WEBrick-label-Basic+and+Digest+authentication">Basic and Digest authentication<span><a href="#module-WEBrick-label-Basic+and+Digest+authentication">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="WEBrick.html">WEBrick</a> provides both Basic and Digest
authentication for regular and proxy servers.  See <a
href="WEBrick/HTTPAuth.html">WEBrick::HTTPAuth</a>, <a
href="WEBrick/HTTPAuth/BasicAuth.html">WEBrick::HTTPAuth::BasicAuth</a> and
<a
href="WEBrick/HTTPAuth/DigestAuth.html">WEBrick::HTTPAuth::DigestAuth</a>.</p>

<h2 id="module-WEBrick-label-WEBrick+as+a+Production+Web+Server"><a href="WEBrick.html">WEBrick</a> as a Production Web Server<span><a href="#module-WEBrick-label-WEBrick+as+a+Production+Web+Server">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="WEBrick.html">WEBrick</a> can be run as a production server for
small loads.</p>

<h3 id="module-WEBrick-label-Daemonizing">Daemonizing<span><a href="#module-WEBrick-label-Daemonizing">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>To start a <a href="WEBrick.html">WEBrick</a> server as a daemon simple run
<a href="WEBrick/Daemon.html#method-c-start">WEBrick::Daemon.start</a>
before starting the server.</p>

<h3 id="module-WEBrick-label-Dropping+Permissions">Dropping Permissions<span><a href="#module-WEBrick-label-Dropping+Permissions">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="WEBrick.html">WEBrick</a> can be started as one user to gain
permission to bind to port 80 or 443 for serving HTTP or HTTPS traffic then
can drop these permissions for regular operation.  To listen on all
interfaces for HTTP traffic:</p>

<pre class="ruby"><span class="ruby-identifier">sockets</span> = <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">create_listeners</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">80</span>
</pre>

<p>Then drop privileges:</p>

<pre class="ruby"><span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">su</span> <span class="ruby-string">'www'</span>
</pre>

<p>Then create a server that does not listen by default:</p>

<pre>server = WEBrick::HTTPServer.new :DoNotListen =&gt; true, # ...</pre>

<p>Then overwrite the listening sockets with the port 80 sockets:</p>

<pre class="ruby"><span class="ruby-identifier">server</span>.<span class="ruby-identifier">listeners</span>.<span class="ruby-identifier">replace</span> <span class="ruby-identifier">sockets</span>
</pre>

<h3 id="module-WEBrick-label-Logging">Logging<span><a href="#module-WEBrick-label-Logging">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="WEBrick.html">WEBrick</a> can separately log server operations and
end-user access.  For server operations:</p>

<pre class="ruby"><span class="ruby-identifier">log_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-string">'/var/log/webrick.log'</span>, <span class="ruby-string">'a+'</span>
<span class="ruby-identifier">log</span> = <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">Log</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">log_file</span>
</pre>

<p>For user access logging:</p>

<pre class="ruby"><span class="ruby-identifier">access_log</span> = [
  [<span class="ruby-identifier">log_file</span>, <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">AccessLog</span><span class="ruby-operator">::</span><span class="ruby-constant">COMBINED_LOG_FORMAT</span>],
]

<span class="ruby-identifier">server</span> = <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPServer</span>.<span class="ruby-identifier">new</span> :<span class="ruby-constant">Logger</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">log</span>, :<span class="ruby-constant">AccessLog</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">access_log</span>
</pre>

<p>See <a href="WEBrick/AccessLog.html">WEBrick::AccessLog</a> for further log
formats.</p>

<h3 id="module-WEBrick-label-Log+Rotation"><a href="WEBrick/Log.html">Log</a> Rotation<span><a href="#module-WEBrick-label-Log+Rotation">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>To rotate logs in <a href="WEBrick.html">WEBrick</a> on a HUP signal (like
syslogd can send), open the log file in ‘a+’ mode (as above) and trap ‘HUP’
to reopen the log file:</p>

<pre>trap 'HUP' do log_file.reopen '/path/to/webrick.log', 'a+'</pre>

<h2 id="module-WEBrick-label-Copyright">Copyright<span><a href="#module-WEBrick-label-Copyright">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Author: IPR – Internet Programming with Ruby – writers</p>

<p>Copyright © 2000 TAKAHASHI Masayoshi, GOTOU YUUZOU Copyright © 2002
Internet Programming with Ruby writers. All rights reserved.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="VERSION">VERSION</a></dt>
          
          <dd class="description"><p>The <a href="WEBrick.html">WEBrick</a> version</p></dd>
          
        
        </dl>
      </div>
      

      

      <!-- Methods -->
      
    </div><!-- 5Buntitled-5D -->
  
  <div id='tx_WEBrick_versioned' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_WEBrick_versioned").load("/associated/2_2_3/WEBrick.html");</script> <div id='tx_WEBrick' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_WEBrick").load("/associated/WEBrick.html");</script> 
      
  <!-- disqus ? -->
   <div class='info'>
  <p>Commenting is here to help enhance the documentation.  For example, code samples, or clarification of the documentation.</p>
  <p>If you have questions about Ruby or the documentation, please post to one of the <a href='http://www.ruby-lang.org/en/community/mailing-lists/'>Ruby mailing lists</a>.  You will get better, faster, help that way.</p>
  <p>If you wish to post a correction of the docs, please do so, but also <a href='http://bugs.ruby-lang.org' >file bug report</a> so that it can be corrected for the next release. Thank you.</p>
  <p>If you want to help improve the Ruby documentation, please visit <a href='http://documenting-ruby.org/'>Documenting-ruby.org</a>.</p> 
    </div>


  
  </div><!-- documentation -->
  <div id='dynamic'>
  </div>
      
        <div id="disqus_thread"></div>
  <script type="text/javascript">
     function setDisqusUrl(){
      var _loc = window.location.href;
      disqus_url = _loc.split("?")[0];
    }

     var disqus_url;
     
    
     setDisqusUrl();
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    // var disqus_shortname = 'rubydocbeta'; // required 
    var disqus_shortname = 'ruby-doc'; // required 


    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

      
<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 2_2_3</small></p> 
  
   <p><a href="http://ruby-doc.org">Ruby-doc.org</a> is provided by <a href="http://jamesbritt.com">James Britt</a> and <a href="http://neurogami.com">Neurogami</a>. <a href="http://neurogami.com">Maximum R+D</a>.</p>
 
    <p><small>Generated with Ruby-doc Rdoc Generator 0.33.0</small>.</p>
  </div>
</div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-335317-2', 'auto');
  ga('send', 'pageview');

</script>


    
 <script type='text/javascript'>
$(document).ready(function() {
      $.ajaxSetup({ cache: false });
      $("#vulns-alert").load("/associated/vulns.html");
    });

    </script>


 
		<script type='text/javascript'>

	function loadPlus(plusdocs){
//		var img_h = $("img.carbonad-image").css('height');
		//if(img_h != undefined) { //---
			$(plusdocs).find("div[class='associated_wrapper']").each (function() {
					$("#" + this.id).append($(plusdocs).find("#" + this.id ));
					});
		//} // ---
	} // end loadPlusdocs

   function loadInline(json){
    for (var lookFor in json) {
      $(lookFor).after(json[lookFor]);
     }
  } // end loadPlusdocs


$(document).ready(function() {
		$.ajaxSetup({ cache: false });
			$.get('/associated/2_2_3/plus_WEBrick.html', 
			function(plusdocs) {
			setTimeout(function() {
				loadPlus(plusdocs);
				}, 2000);
			}
			);


    $.ajax({
    dataType: "json",
     url: '/associated/2_2_3/inline_WEBrick.js',
     success: function(json) {
			setTimeout(function() {
				loadInline(json);
				}, 2000);
			}
   });

		});
</script>
		
</body>
</html>


